# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ datetime –≤ –ø–∞–Ω–µ–ª–∏ –Ω–∞—Å—Ç–∞–≤–Ω–∏–∫–∞

## –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ —Å–ø–∏—Å–∫–∞ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –Ω–∞—Å—Ç–∞–≤–Ω–∏–∫–∞ –≤–æ–∑–Ω–∏–∫–∞–ª–∞ –æ—à–∏–±–∫–∞:
```
TypeError: can't subtract offset-naive and offset-aware datetimes
```

## –ü—Ä–∏—á–∏–Ω–∞

–í —Ñ—É–Ω–∫—Ü–∏–∏ `_build_students_text()` –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–æ –≤—ã—á–∏—Ç–∞–Ω–∏–µ:
```python
datetime.now() - datetime.fromisoformat(last_activity.replace('Z', '+00:00'))
```

–ì–¥–µ:
- `datetime.now()` ‚Üí naive datetime (–±–µ–∑ —Ç–∞–π–º–∑–æ–Ω—ã)
- `datetime.fromisoformat(...+00:00)` ‚Üí aware datetime (—Å UTC)

Python –∑–∞–ø—Ä–µ—â–∞–µ—Ç –≤—ã—á–∏—Ç–∞—Ç—å aware –∏ naive datetime –æ–±—ä–µ–∫—Ç—ã.

## –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

### 1. –î–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç timezone
```python
from datetime import datetime, timezone
```

### 2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
```python
activity_text = "üü¢ –ê–∫—Ç–∏–≤–µ–Ω"
if last_activity:
    try:
        last_activity_dt = datetime.fromisoformat(last_activity.replace('Z', '+00:00'))
        delta = datetime.now(timezone.utc) - last_activity_dt
        if delta.days >= 7:
            activity_text = "üî¥ –ù–µ–∞–∫—Ç–∏–≤–µ–Ω"
    except Exception:
        activity_text = "‚ö™ –ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ"
else:
    activity_text = "üî¥ –ù–µ–∞–∫—Ç–∏–≤–µ–Ω"
```

### 3. –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤ show_mentor_students
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø—É—Å—Ç–æ–π —Ç–µ–∫—Å—Ç
- –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å exc_info=True
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞—â–∏—Ç–∞ –æ—Ç –æ—à–∏–±–æ–∫ –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏—è
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ "–ù–∞–∑–∞–¥" –≤ —Å–ª—É—á–∞–µ –æ—à–∏–±–∫–∏

## –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

- `mainbot/handlers/mentor_panel.py`

## –†–µ–∑—É–ª—å—Ç–∞—Ç

‚úÖ –û—à–∏–±–∫–∞ datetime –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞
‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞—â–∏—Ç–∞ –æ—Ç –ø—É—Å—Ç–æ–≥–æ —Ç–µ–∫—Å—Ç–∞
‚úÖ –£–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
‚úÖ –ü–∞–Ω–µ–ª—å –Ω–∞—Å—Ç–∞–≤–Ω–∏–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ
